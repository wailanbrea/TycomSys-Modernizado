# Laravel Cloud Configuration
# Based on official documentation: https://cloud.laravel.com/docs/quickstart

name: tycomsys-modernizado
description: "TICOMSYS - Sistema de Gesti√≥n de Reparaciones"

# Environment Configuration
environments:
  production:
    php_version: "8.2"
    document_root: "public"
    web_server: "nginx"
    
    # Environment Variables
env_vars:
  APP_NAME: "Ticomsys-Modernizado"
  APP_ENV: "production"
  APP_KEY: "base64:PfJiwGJ8YDmxKK8nE1H9JKTvOBJ0tkdwk3C027quLQw="
  APP_DEBUG: "false"
  APP_URL: "https://ticomsys-modernizado-main-oawkq1.laravel.cloud"
  LOG_CHANNEL: "laravel-cloud-socket"
  LOG_STDERR_FORMATTER: "Monolog\\Formatter\\JsonFormatter"
  DB_CONNECTION: "pgsql"
  DB_HOST: "ep-crimson-bird-a46hyy47.aws-us-east-1.pg.laravel.cloud"
  DB_PORT: "5432"
  DB_DATABASE: "main"
  DB_USERNAME: "laravel"
  DB_PASSWORD: "npg_DWalwCmzK7t5"
  SESSION_DRIVER: "cookie"
  CACHE_STORE: "database"
  SCHEDULE_CACHE_DRIVER: "database"
  VITE_APP_NAME: "${APP_NAME}"
      
    # Database Configuration
    database:
      type: "mysql"
      version: "8.0"
      
    # Build Configuration
    build:
      buildpack: "heroku/php"
      commands:
        - "composer install --no-dev --optimize-autoloader"
        - "php artisan migrate --force"
        - "php artisan db:seed --force"
        - "php artisan config:cache"
        - "php artisan route:cache"
        - "php artisan view:cache"

# Deployment Configuration
deployment:
  strategy: "git"
  branch: "main"
  auto_deploy: true
  
# Resource Configuration
resources:
  compute:
    type: "standard"
    size: "small"
